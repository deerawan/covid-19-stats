<section class="header">
  <h1 class="header__title">Covid-19 Stats</h1>
  <app-mode-toggle
    [mode]="storageTheme$ | async"
    (lightMode)="setLightMode()"
    (darkMode)="setDarkMode()"
  ></app-mode-toggle>
</section>

<section class="country-select">
  <label for="country">Select country</label>
  <ng-select
    [items]="countryNames$ | async"
    id="country"
    bindLabel="country"
    autofocus
    bindValue="country"
    (change)="onCountryChange($event)"
  >
  </ng-select>
</section>

<ng-container *ngIf="stats$ | async as stats; else shimmer">
  <app-stat-title [statTitle]="statTitle"></app-stat-title>
  <div class="stats">
    <app-stat-item
      *ngFor="let statItem of stats"
      [title]="statItem.title"
      [total]="statItem.total | number"
      [color]="statItem.color"
      class="stats__item"
    >
    </app-stat-item>
  </div>
  <section class="footer">
    <p>
      <span class="remark">Last updated:</span>
      {{ lastUpdated$ | async | date: 'd MMM y, H:mm' }}
    </p>
    <p>
      <span class="remark">Data source:</span>
      worldometers.info
    </p>
  </section>
</ng-container>

<ng-template #shimmer>
  <div class="shimmer title-shimmer"></div>
  <div class="stats-shimmer">
    <div class="shimmer stat-shimmer"></div>
    <div class="shimmer stat-shimmer"></div>
    <div class="shimmer stat-shimmer"></div>
    <div class="shimmer stat-shimmer"></div>
    <div class="shimmer stat-shimmer"></div>
    <div class="shimmer stat-shimmer"></div>
    <div class="shimmer stat-shimmer"></div>
    <div class="shimmer stat-shimmer"></div>
  </div>
</ng-template>
